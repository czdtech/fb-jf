---
import BaseLayout from '@/layouts/BaseLayout.astro'
import Navigation from '@/components/Navigation.astro'
import Footer from '@/components/Footer.astro'
import extractedData from '@/data/extracted-data.json'
import { getEntry, render } from 'astro:content'
//

const lang = 'ja'
const title = 'Fiddlebops - 無料オンラインFiddlebops Incrediboxゲーム'
const description = 'Fiddlebopsであなただけの音楽を創りましょう！Incrediboxにインスパイアされたファン制作のプロジェクトで、様々なサウンドをミックスしてパーソナライズされた音楽を作成できます。'

const structuredData = {
  "@context": "https://schema.org",
  "@type": "Game",
  "name": title,
  "alternateName": "playfiddlebops.com",
  "url": "https://www.playfiddlebops.com/ja/",
  "description": description
};

const meta = {
  title,
  description,
  canonical: 'https://www.playfiddlebops.com/ja/',
  ogImage: 'https://www.playfiddlebops.com/tw.jpg'
}

const { navigation } = extractedData
const hreflangLinks = (navigation?.languages || []).map((l: any) => ({
  code: l.code === 'en' ? 'x-default' : l.code,
  url: `https://www.playfiddlebops.com${l.url}`
}))

const home = await getEntry('i18nHome', 'ja')
if (!home) throw new Error('Home content not found for locale: ja')
const { Content } = await render(home)
---

<BaseLayout meta={meta} lang={lang} hreflang={hreflangLinks} structuredData={structuredData}>
  <Navigation navigation={navigation.main} languages={navigation.languages} currentLang={lang} currentPath={`/${lang}/`} />
  <main class="container" style="min-height:60vh; padding:2rem 0;">
    <h1 style="margin-bottom:1rem;">{home.data.title}</h1>
    <p style="margin-bottom:2rem;">{home.data.description}</p>
    <section class="about" id="about">
      <div class="about-content">
        <Content />
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
