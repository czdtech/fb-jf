---
import { getCollection, type CollectionEntry } from 'astro:content';
import Header from './header.astro';
import NewGames from './new-games.astro';
import PopularGames from './popular-games.astro';
import TrendingGames from './trending-games.astro';

type Props = {
  game: CollectionEntry<'games'>;
};

export async function getStaticPaths() {
  const allGames = await getCollection('games');

  const paths = allGames.map(game => {
    return {
      params: { 
        gameSlug: game.slug 
      },
      props: { 
        game: game 
      },
    };
  });

  return paths;
}
const { game } = Astro.props as Props;
const { title, description, iframeSrc, tags, thumbnail, releaseDate, score, urlStr} = game.data;
const { Content } = await game.render();
---

  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title} - Play {title} Online</title>
    <meta name="keywords" content={title} />
    <meta name="description" content={description} />
    <meta name="robots" content="index, follow" />

    <link rel="canonical" href={Astro.url.href} />

    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Game",
      "name": `${title} - Play ${title} Online`,
      "alternateName": "playfiddlebops.com",
      "url": Astro.url.href,
      "description": description
    })} />

    <meta property="og:title" content={`${title} - Play ${title} Online`} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={Astro.url.href} />
    <meta property="og:site_name" content="FiddleBops" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:image" content={thumbnail} />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content={Astro.url.href} /> 
    <meta name="twitter:title" content={`${title} - Play ${title} Online`} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={thumbnail} />


    <link rel="icon" href="https://www.playfiddlebops.com/favicon.ico"/>
    <link rel="stylesheet" href="/main.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    
<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_default_style" data-a2a-scroll-show="0,60">

<a class="a2a_button_x"></a>
<a class="a2a_button_reddit"></a>
<a class="a2a_button_facebook"></a>
<a class="a2a_button_telegram"></a>
<a class="a2a_button_whatsapp"></a>
<a class="a2a_button_linkedin"></a>
    <a class="a2a_dd" href="https://www.playfiddlebops.com/"></a>
</div>
    <script define:vars={{ iframeUrl: iframeSrc }}>
        document.addEventListener('DOMContentLoaded', function() {
            const iframe = document.getElementById("fiddlebops-iframe");
            const playButton = document.getElementById("playButton");
            const gameImageContainer = document.querySelector(".game-iframe-sprunki");
            if (playButton && iframe && gameImageContainer) {
                function loadIframe() {
                    iframe.src = iframeUrl;
                    playButton.style.display = "none";
                    iframe.focus();
                    gameImageContainer.style.backgroundImage = "none";
                }
                playButton.addEventListener("click", loadIframe);
            }
        });
    </script>
<script define:vars={{ iframeUrl: iframeSrc }}>
    document.addEventListener('DOMContentLoaded', function() {

        const iframe = document.getElementById("fiddlebops-iframe");
        const playButton = document.getElementById("playButton");
        const gameContainer = document.querySelector(".game-iframe-sprunki");
        const fullscreenBtn = document.getElementById("fullscreen-btn");
        const fullscreenIcon = fullscreenBtn.querySelector('i');


        if (playButton && iframe && gameContainer && fullscreenBtn) {


            function loadIframe() {
                iframe.src = iframeUrl;
                playButton.style.display = "none";
                iframe.focus();
                gameContainer.style.backgroundImage = "none";
                fullscreenBtn.style.display = "block"; 
            }
            playButton.addEventListener("click", loadIframe);


            fullscreenBtn.addEventListener('click', () => {

                if (document.fullscreenElement) {

                    document.exitFullscreen();
                } else {


                    gameContainer.requestFullscreen();
                }
            });


            document.addEventListener('fullscreenchange', () => {
                if (document.fullscreenElement) {

                    fullscreenIcon.classList.remove('fa-expand');
                    fullscreenIcon.classList.add('fa-compress');
                } else {

                    fullscreenIcon.classList.remove('fa-compress');
                    fullscreenIcon.classList.add('fa-expand');
                }
            });
        }
    });
</script>
<!-- AddToAny BEGIN -->
<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_vertical_style">
<a class="a2a_button_x"></a>
<a class="a2a_button_reddit"></a>
<a class="a2a_button_facebook"></a>
<a class="a2a_button_telegram"></a>
<a class="a2a_button_whatsapp"></a>
<a class="a2a_button_linkedin"></a>
    <a class="a2a_dd" href="https://www.playfiddlebops.com/"></a>
</div>

<script defer src="https://static.addtoany.com/menu/page.js"></script>

</body>
</html>
