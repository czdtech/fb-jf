---
import OriginalGamePage from '../[slug].astro';
import { generateLocalizedGamePaths } from '@/utils/i18n';
import type { CollectionEntry } from 'astro:content';

/**
 * 为法语 (fr) 游戏详情页生成静态路径。
 * 
 * URL 形如 /fr/{slug}/
 * - slug 为英文基础 slug
 * - props 内包含对应语言内容或回退到英文内容
 */
export async function getStaticPaths() {
  const frPaths = await generateLocalizedGamePaths('fr');

  return frPaths.map((p) => ({
    params: { slug: p.params.slug }, // params 不含 locale，因为路径已位于 /fr/
    props: p.props, // { game, locale }
  }));
}

// 获取传入的 game 与 locale (应为 fr)
const { game, locale } = Astro.props as { game: CollectionEntry<'games'>; locale: string };
---
<!-- 直接渲染原始游戏页组件，通过 props 指定 game 与 locale -->
<OriginalGamePage game={game} locale={locale} />