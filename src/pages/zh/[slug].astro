---
import OriginalGamePage from '../[slug].astro';
import { generateLocalizedGamePaths } from '@/utils/i18n';
import type { CollectionEntry } from 'astro:content';

/**
 * 為中文 (zh) 遊戲詳情頁生成靜態路徑。
 * 
 * URL 形如 /zh/{slug}/
 * - slug 為英文基礎 slug
 * - props 內包含對應語言內容或回退到英文內容
 */
export async function getStaticPaths() {
  const zhPaths = await generateLocalizedGamePaths('zh');

  return zhPaths.map((p) => ({
    params: { slug: p.params.slug }, // params 不含 locale，因為路徑已位於 /zh/
    props: p.props, // { game, locale }
  }));
}

// 取得傳入的 game 與 locale (應為 zh)
const { game, locale } = Astro.props as { game: CollectionEntry<'games'>; locale: string };
---
<!-- 直接渲染原始遊戲頁組件，透過 props 指定 game 與 locale -->
<OriginalGamePage game={game} locale={locale} />
