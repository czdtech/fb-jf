---
import type { Game } from '@/types';

export interface Props {
  game: Game;
  variant?: 'grid' | 'list' | 'featured' | 'sidebar';
}

const { game, variant = 'grid' } = Astro.props;

// 安全的URL处理
const gameUrl = game.slug ? (game.slug.startsWith('http') ? game.slug : `/${game.slug}/`) : '#';
---

{variant === 'sidebar' && (
  <div class="game-card game-card-sidebar">
    <div class="game-card-image">
      <img src={game.image} alt={game.title}>
      <div class="game-card-overlay">
        <button class="game-card-play-button">
          <i class="fas fa-play"></i>
        </button>
      </div>
    </div>
    <div class="game-card-content">
      <h3 class="game-card-title">{game.title}</h3>
      <p class="game-card-description">{game.description || "体验这款精彩的音乐创作游戏"}</p>
    </div>
  </div>
)}

{variant === 'grid' && (
  <div class="game-card game-card-grid">
    <div class="game-card-image">
      <img src={game.image} alt={game.title}>
      <div class="game-card-overlay">
        <button class="game-card-play-button">
          <i class="fas fa-play"></i>
        </button>
      </div>
    </div>
    <div class="game-card-content">
      <h3 class="game-card-title">{game.title}</h3>
      <p class="game-card-description">{game.description || "体验这款精彩的音乐创作游戏"}</p>
    </div>
  </div>
)}

{variant === 'featured' && (
  <div class="game-card game-card-featured">
    <div class="game-card-image">
      <img src={game.image} alt={game.title}>
      <div class="game-card-overlay">
        <button class="game-card-play-button">
          <i class="fas fa-play"></i>
        </button>
      </div>
    </div>
    <div class="game-card-content">
      <h3 class="game-card-title">{game.title}</h3>
      <p class="game-card-description">{game.description || "体验这款精彩的音乐创作游戏"}</p>
    </div>
  </div>
)}