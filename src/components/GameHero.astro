---
interface Props {
  game: {
    title: string
    description: string
    category: string
    image: string
    iframe: string
    slug: string
    breadcrumb?: {
      home: string
      current: string
    }
  }
  rating?: {
    score: number
    votes: number
    maxScore?: number
  }
  pageType?: string
}

const { game, rating, pageType } = Astro.props
---

<!-- Apple-inspired Premium Game Hero -->
<section class="hero-apple-container">
  <!-- Refined Background System -->
  <div class="hero-bg-system">
    <div class="hero-bg-gradient"></div>
    <div class="hero-bg-mesh"></div>
    <div class="hero-bg-blur"></div>
  </div>
  
  <!-- Premium Navigation -->
  <div class="container">
    <nav class="breadcrumb-apple">
      <a href="/" class="breadcrumb-item">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <span>{game.breadcrumb?.home || 'Home'}</span>
      </a>
      <svg class="breadcrumb-divider" width="8" height="8" viewBox="0 0 24 24" fill="currentColor">
        <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
      </svg>
      <span class="breadcrumb-current">{game.breadcrumb?.current || game.title}</span>
    </nav>
  </div>

  <!-- Main Hero Content -->
  <div class="hero-main-content">
    <div class="container">
      <div class="hero-apple-grid">
        
        <!-- Info Panel -->
        <div class="hero-info-panel">
          <div class="info-content">
            <!-- Title Section -->
            <div class="title-section">
              <div class="title-wrapper">
                <h1 class="game-title-apple">{game.title}</h1>
                <div class="title-accent"></div>
              </div>
              
              <div class="badges-apple">
                <span class="badge-category">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                  </svg>
                  {game.category}
                </span>
                <span class="badge-status">
                  <div class="status-dot"></div>
                  Ready to Play
                </span>
              </div>
            </div>

            <!-- Description -->
            <div class="description-section">
              <p class="game-description-apple">{game.description}</p>
            </div>

            <!-- Rating Section -->
            {rating && (
              <div class="rating-apple">
                <div class="stars-row">
                  {Array.from({ length: 5 }, (_, i) => (
                    <div class={`star-apple ${i < Math.floor(rating.score) ? 'filled' : 'empty'}`}>
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                      </svg>
                    </div>
                  ))}
                </div>
                <div class="rating-meta">
                  <span class="score">{rating.score}</span>
                  <span class="divider">•</span>
                  <span class="reviews">{rating.votes} reviews</span>
                </div>
              </div>
            )}

            <!-- Action Buttons -->
            <div class="actions-apple">
              <button class="btn-primary-apple" onclick="scrollToGame()">
                <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z"/>
                </svg>
                <span>Play Now</span>
                <div class="btn-shine"></div>
              </button>

              <button class="btn-secondary-apple" onclick="shareGame()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
                <span>Share</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Game Preview Panel -->
        <div class="hero-preview-panel">
          <div class="preview-container">
            <!-- Game Window Header -->
            <div class="game-window-header">
              <div class="window-controls">
                <div class="control-dot close"></div>
                <div class="control-dot minimize"></div>
                <div class="control-dot maximize"></div>
              </div>
              
              <div class="window-title">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M21,6V8H3V6H21M3,18V16H21V18H3M3,13H21V11H3V13Z"/>
                </svg>
                <span>{game.title}</span>
              </div>
              
              <div class="window-actions">
                <button class="action-btn" onclick="reloadGame()" title="Reload">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                  </svg>
                </button>
                <button class="action-btn" onclick="toggleFullscreen()" title="Fullscreen">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Game Content Area -->
            <div class="game-content-area">
              <div class="game-loading-state">
                <div class="loading-animation">
                  <div class="loading-circle"></div>
                  <div class="loading-circle"></div>
                  <div class="loading-circle"></div>
                </div>
                <span class="loading-text">Loading Experience...</span>
              </div>
              
              <iframe
                id="hero-game-iframe"
                src={game.iframe}
                title={game.title}
                width="100%"
                height="100%"
                frameborder="0"
                allowfullscreen
              >
              </iframe>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<script>
  // Apple-inspired smooth interactions
  function scrollToGame() {
    const iframe = document.getElementById('hero-game-iframe')
    if (iframe) {
      iframe.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'center',
        inline: 'nearest'
      })
      // Add subtle focus state
      iframe.closest('.preview-container')?.classList.add('focused')
      setTimeout(() => {
        iframe.closest('.preview-container')?.classList.remove('focused')
      }, 2000)
    }
  }

  function shareGame() {
    const shareData = {
      title: document.title,
      text: `Experience ${document.querySelector('.game-title-apple')?.textContent} - An incredible music creation game`,
      url: window.location.href,
    }
    
    if (navigator.share && navigator.canShare?.(shareData)) {
      navigator.share(shareData)
    } else {
      // Fallback with elegant animation
      navigator.clipboard.writeText(window.location.href).then(() => {
        showToast('Link copied to clipboard')
      })
    }
  }

  function toggleFullscreen() {
    const container = document.querySelector('.game-content-area')
    if (container) {
      if (!document.fullscreenElement) {
        container.requestFullscreen().catch(err => {
          console.log('Fullscreen error:', err)
        })
      } else {
        document.exitFullscreen()
      }
    }
  }

  function reloadGame() {
    const iframe = document.getElementById('hero-game-iframe')
    const loadingState = document.querySelector('.game-loading-state')
    
    if (iframe && loadingState) {
      // Show loading animation
      loadingState.style.opacity = '1'
      loadingState.style.pointerEvents = 'auto'
      
      // Reload iframe
      iframe.src = iframe.src
      
      // Hide loading after delay
      setTimeout(() => {
        loadingState.style.opacity = '0'
        loadingState.style.pointerEvents = 'none'
      }, 1500)
    }
  }

  function showToast(message) {
    const toast = document.createElement('div')
    toast.className = 'apple-toast'
    toast.textContent = message
    document.body.appendChild(toast)
    
    // Animate in
    requestAnimationFrame(() => {
      toast.style.transform = 'translateX(-50%) translateY(0)'
      toast.style.opacity = '1'
    })
    
    // Remove after delay
    setTimeout(() => {
      toast.style.transform = 'translateX(-50%) translateY(-100%)'
      toast.style.opacity = '0'
      setTimeout(() => {
        document.body.removeChild(toast)
      }, 300)
    }, 2500)
  }

  // Enhanced loading experience
  document.addEventListener('DOMContentLoaded', () => {
    const iframe = document.getElementById('hero-game-iframe')
    const loadingState = document.querySelector('.game-loading-state')
    
    if (iframe && loadingState) {
      iframe.addEventListener('load', () => {
        setTimeout(() => {
          loadingState.style.opacity = '0'
          loadingState.style.pointerEvents = 'none'
        }, 800) // Allow time for content to render
      })
      
      // Timeout fallback
      setTimeout(() => {
        if (loadingState.style.opacity !== '0') {
          loadingState.style.opacity = '0'
          loadingState.style.pointerEvents = 'none'
        }
      }, 5000)
    }
    
    // Add intersection observer for animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in')
        }
      })
    }, { threshold: 0.1 })
    
    document.querySelectorAll('.hero-info-panel, .hero-preview-panel').forEach(el => {
      observer.observe(el)
    })
  })
</script>

<style>
  /* ========================================================================== */
  /* APPLE-INSPIRED PREMIUM GAME HERO                                           */
  /* Refined, elegant, with attention to micro-interactions                     */
  /* ========================================================================== */

  /* Core Container */
  .hero-apple-container {
    position: relative;
    padding-top: 90px;
    min-height: 100vh;
    overflow: hidden;
  }

  /* Gaming Background System - 游戏风格背景 */
  .hero-bg-system {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
    overflow: hidden;
  }

  .hero-bg-gradient {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(147, 51, 234, 0.03) 0%,
      rgba(168, 85, 247, 0.02) 25%,
      rgba(236, 72, 153, 0.02) 50%,
      rgba(59, 130, 246, 0.02) 75%,
      rgba(250, 250, 251, 0.98) 100%
    );
  }

  .hero-bg-mesh {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(circle at 20% 30%, rgba(168, 85, 247, 0.08) 0%, transparent 40%),
      radial-gradient(circle at 80% 70%, rgba(236, 72, 153, 0.06) 0%, transparent 40%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.04) 0%, transparent 60%);
    background-size: 600px 600px, 800px 800px, 1000px 1000px;
    animation: gamingPulse 15s ease-in-out infinite;
  }

  .hero-bg-blur {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: blur(1px);
    background: 
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 100px,
        rgba(168, 85, 247, 0.01) 100px,
        rgba(168, 85, 247, 0.01) 101px
      );
  }

  @keyframes gamingPulse {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
    25% { transform: scale(1.1) rotate(1deg); opacity: 1; }
    50% { transform: scale(0.95) rotate(-1deg); opacity: 0.6; }
    75% { transform: scale(1.05) rotate(0.5deg); opacity: 0.9; }
  }

  /* Gaming Breadcrumb Navigation - 游戏风格面包屑 */
  .breadcrumb-apple {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 40px;
    padding: 20px 0;
  }

  .breadcrumb-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border-radius: 24px;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.05));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(168, 85, 247, 0.2);
    color: #7c3aed;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    overflow: hidden;
  }

  .breadcrumb-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
  }

  .breadcrumb-item:hover {
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.1));
    color: #9333ea;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 6px 20px rgba(168, 85, 247, 0.25);
  }

  .breadcrumb-item:hover::before {
    left: 100%;
  }

  .breadcrumb-item svg {
    width: 14px;
    height: 14px;
  }

  .breadcrumb-divider {
    color: #d1d5db;
    opacity: 0.6;
  }

  .breadcrumb-current {
    color: #374151;
    font-size: 13px;
    font-weight: 600;
  }

  /* Main Content Grid */
  .hero-main-content {
    padding: 60px 0 120px;
  }

  .hero-apple-grid {
    display: grid;
    grid-template-columns: 1fr 1.3fr;
    gap: 80px;
    align-items: start;
  }

  /* Info Panel - Left Side */
  .hero-info-panel {
    position: relative;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hero-info-panel.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  .info-content {
    max-width: 480px;
  }

  /* Title Section */
  .title-section {
    margin-bottom: 32px;
  }

  .title-wrapper {
    position: relative;
    margin-bottom: 24px;
  }

  .game-title-apple {
    font-size: clamp(2.5rem, 4vw, 3.5rem);
    font-weight: 800;
    line-height: 1.1;
    margin: 0;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #a855f7 0%, #ec4899 50%, #3b82f6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 40px rgba(168, 85, 247, 0.3);
    animation: titleGlow 3s ease-in-out infinite alternate;
  }

  @keyframes titleGlow {
    0% { filter: brightness(1) contrast(1); }
    100% { filter: brightness(1.1) contrast(1.1); }
  }

  .title-accent {
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 80px;
    height: 6px;
    background: linear-gradient(90deg, #a855f7, #ec4899, #3b82f6);
    border-radius: 3px;
    animation: accentWave 2s ease-in-out 0.5s both;
    box-shadow: 0 2px 10px rgba(168, 85, 247, 0.5);
  }

  @keyframes accentWave {
    0% { 
      width: 0;
      opacity: 0;
    }
    50% {
      width: 100px;
    }
    100% { 
      width: 80px;
      opacity: 1;
    }
  }

  /* Badges */
  .badges-apple {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .badge-category {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(236, 72, 153, 0.1));
    color: #9333ea;
    border: 2px solid rgba(168, 85, 247, 0.3);
    border-radius: 25px;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    overflow: hidden;
  }

  .badge-category::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.2), transparent);
    transition: left 0.5s ease;
  }

  .badge-category:hover::before {
    left: 100%;
  }

  .badge-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(16, 185, 129, 0.1));
    color: #10b981;
    border: 2px solid rgba(34, 197, 94, 0.3);
    border-radius: 25px;
    font-size: 14px;
    font-weight: 700;
    animation: statusGlow 2s ease-in-out infinite;
  }

  @keyframes statusGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(34, 197, 94, 0.3); }
    50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.5); }
  }

  .status-dot {
    width: 6px;
    height: 6px;
    background: #22c55e;
    border-radius: 50%;
    animation: statusPulse 2s ease-in-out infinite;
  }

  @keyframes statusPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.2); }
  }

  /* Description */
  .description-section {
    margin-bottom: 32px;
  }

  .game-description-apple {
    font-size: 18px;
    line-height: 1.6;
    color: #6b7280;
    margin: 0;
    font-weight: 400;
  }

  /* Rating System */
  .rating-apple {
    margin-bottom: 40px;
    padding: 20px 0;
  }

  .stars-row {
    display: flex;
    gap: 4px;
    margin-bottom: 8px;
  }

  .star-apple {
    transition: all 0.2s ease;
  }

  .star-apple.filled {
    color: #fbbf24;
    filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.6));
    animation: starPulse 2s ease-in-out infinite;
  }

  @keyframes starPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  .star-apple.empty {
    color: #e5e7eb;
  }

  .rating-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
  }

  .rating-meta .score {
    font-weight: 700;
    color: #111827;
  }

  .rating-meta .divider {
    color: #d1d5db;
  }

  .rating-meta .reviews {
    color: #6b7280;
  }

  /* Action Buttons */
  .actions-apple {
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
  }

  .btn-primary-apple {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 18px 36px;
    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
    color: white;
    border: none;
    border-radius: 30px;
    font-size: 17px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    overflow: hidden;
    box-shadow: 
      0 4px 20px rgba(168, 85, 247, 0.3),
      0 0 0 2px rgba(255, 255, 255, 0.2) inset,
      0 8px 16px -4px rgba(236, 72, 153, 0.3);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .btn-primary-apple::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .btn-primary-apple:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 
      0 8px 30px rgba(168, 85, 247, 0.4),
      0 0 0 3px rgba(255, 255, 255, 0.3) inset,
      0 12px 24px -4px rgba(236, 72, 153, 0.4);
  }

  .btn-primary-apple:hover::after {
    width: 300px;
    height: 300px;
  }

  .btn-primary-apple:active {
    transform: translateY(-1px) scale(0.98);
  }

  .btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    transition: left 0.6s ease;
  }

  .btn-primary-apple:hover .btn-shine {
    left: 100%;
  }

  .btn-secondary-apple {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 14px 28px;
    background: rgba(255, 255, 255, 0.8);
    color: #7c3aed;
    border: 2px solid rgba(168, 85, 247, 0.3);
    border-radius: 25px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
  }

  .btn-secondary-apple::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.1), transparent);
    transition: left 0.5s ease;
  }

  .btn-secondary-apple:hover {
    background: rgba(255, 255, 255, 0.95);
    color: #9333ea;
    border-color: rgba(168, 85, 247, 0.5);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(168, 85, 247, 0.2);
  }

  .btn-secondary-apple:hover::before {
    left: 100%;
  }

  /* Preview Panel - Right Side */
  .hero-preview-panel {
    position: relative;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s;
  }

  .hero-preview-panel.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  .preview-container {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px) saturate(180%);
    border: 2px solid rgba(168, 85, 247, 0.2);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 
      0 20px 60px rgba(168, 85, 247, 0.15),
      0 0 0 1px rgba(255, 255, 255, 0.8) inset,
      0 0 100px rgba(236, 72, 153, 0.1);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
  }

  .preview-container::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(135deg, #a855f7, #ec4899, #3b82f6);
    border-radius: 20px;
    opacity: 0;
    z-index: -1;
    transition: opacity 0.3s ease;
  }

  .preview-container.focused {
    transform: scale(1.02);
    border-color: transparent;
  }

  .preview-container.focused::before {
    opacity: 1;
  }

  /* Game Window Header - 游戏风格窗口头部 */
  .game-window-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 20px;
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(236, 72, 153, 0.03) 100%);
    border-bottom: 2px solid rgba(168, 85, 247, 0.1);
    position: relative;
  }

  .game-window-header::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #a855f7, #ec4899, #3b82f6, #a855f7);
    background-size: 300% 100%;
    animation: borderFlow 5s linear infinite;
  }

  @keyframes borderFlow {
    0% { background-position: 0% 50%; }
    100% { background-position: 300% 50%; }
  }

  .window-controls {
    display: flex;
    gap: 8px;
  }

  .control-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    transition: all 0.2s ease;
  }

  .control-dot.close {
    background: #ff5f57;
  }

  .control-dot.minimize {
    background: #ffbd2e;
  }

  .control-dot.maximize {
    background: #28ca42;
  }

  .control-dot:hover {
    transform: scale(1.1);
    filter: brightness(1.1);
  }

  .window-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
    color: #374151;
  }

  .window-actions {
    display: flex;
    gap: 4px;
  }

  .action-btn {
    width: 28px;
    height: 28px;
    background: transparent;
    border: none;
    border-radius: 6px;
    color: #6b7280;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }

  .action-btn:hover {
    background: rgba(139, 92, 246, 0.1);
    color: #8b5cf6;
  }

  /* Game Content Area */
  .game-content-area {
    position: relative;
    height: 480px;
    background: #f8fafc;
  }

  .game-content-area iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  /* Loading State */
  .game-loading-state {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 24px;
    z-index: 10;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .loading-animation {
    display: flex;
    gap: 8px;
  }

  .loading-circle {
    width: 12px;
    height: 12px;
    background: linear-gradient(135deg, #a855f7, #ec4899);
    border-radius: 50%;
    animation: loadingBounce 1.4s ease-in-out infinite both;
    box-shadow: 0 0 20px rgba(168, 85, 247, 0.6);
  }

  .loading-circle:nth-child(1) { animation-delay: -0.32s; }
  .loading-circle:nth-child(2) { animation-delay: -0.16s; }
  .loading-circle:nth-child(3) { animation-delay: 0s; }

  @keyframes loadingBounce {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1.2);
      opacity: 1;
    }
  }

  .loading-text {
    font-size: 14px;
    font-weight: 500;
    color: #6b7280;
  }

  /* Toast Notification */
  .apple-toast {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 12px 24px;
    border-radius: 24px;
    font-size: 14px;
    font-weight: 500;
    z-index: 1000;
    backdrop-filter: blur(10px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .hero-apple-grid {
      grid-template-columns: 1fr 1fr;
      gap: 60px;
    }

    .game-content-area {
      height: 400px;
    }
  }

  @media (max-width: 768px) {
    .hero-apple-grid {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .hero-preview-panel {
      order: -1;
    }

    .game-content-area {
      height: 350px;
    }

    .game-title-apple {
      font-size: 2.5rem;
    }

    .actions-apple {
      justify-content: center;
    }

    .btn-primary-apple {
      padding: 14px 28px;
      font-size: 15px;
    }
  }

  @media (max-width: 480px) {
    .hero-main-content {
      padding: 40px 0 80px;
    }

    .game-content-area {
      height: 280px;
    }

    .game-title-apple {
      font-size: 2rem;
    }

    .actions-apple {
      flex-direction: column;
      align-items: stretch;
    }

    .btn-primary-apple,
    .btn-secondary-apple {
      justify-content: center;
    }
  }
</style>