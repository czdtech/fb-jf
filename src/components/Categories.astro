---
import Icon from './Icon.astro';
import { getLocaleFromLangAttr, getLocalizedPath, useTranslations } from '../i18n/utils';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props as Props;
const locale = getLocaleFromLangAttr(lang);
const t = useTranslations(locale);
const withLocale = (path: string) => getLocalizedPath(path, locale);

// Category definitions with icon names (matching Icon.astro)
const categories = [
  { slug: 'puzzle', icon: 'puzzle' },
  { slug: 'casual', icon: 'smile' },
  { slug: 'thinky', icon: 'brain' },
  { slug: 'action', icon: 'bolt' },
  { slug: 'sports', icon: 'futbol' },
  { slug: 'strategy', icon: 'chess' },
  { slug: 'platformer', icon: 'footprints' },
  { slug: 'arcade', icon: 'gamepad' },
  { slug: 'shooting', icon: 'crosshairs' },
  { slug: 'card', icon: 'gem' },
  { slug: 'rhythm', icon: 'drum' },
  { slug: 'adventure', icon: 'compass' },
  { slug: 'music', icon: 'music' },
  { slug: 'clicker', icon: 'pointer' },
  { slug: 'driving', icon: 'car' },
  { slug: 'physics', icon: 'atom' },
  { slug: 'multiplayer', icon: 'users' },
  { slug: '2-player', icon: 'cogs' },
] as const;
---

<section class="games categories">
  <div class="container">
    <h2>{t('categories.title', 'Game Categories')}</h2>
    <div class="category-grid">
      {categories.map(({ slug, icon }) => {
        const displayName = t(`categories.${slug}`, slug);
        return (
          <a class="category-card" href={withLocale(`/c/${slug}/`)} title={displayName}>
            <div class="category-card-content">
              <Icon name={icon} size={20} />
              <span>{displayName}</span>
            </div>
          </a>
        );
      })}
    </div>
  </div>
</section>
