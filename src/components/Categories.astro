---
import { getLocaleFromLangAttr, getLocalizedPath, useTranslations } from '../i18n/utils';

interface Props {
  lang?: string;
}

const { lang = 'en' } = Astro.props as Props;
const locale = getLocaleFromLangAttr(lang);
const t = useTranslations(locale);
const withLocale = (path: string) => getLocalizedPath(path, locale);

// Category definitions with icon classes and slug keys
const categories = [
  { slug: 'puzzle', icon: 'fa-solid fa-puzzle-piece' },
  { slug: 'casual', icon: 'fa-solid fa-face-smile' },
  { slug: 'thinky', icon: 'fa-solid fa-brain' },
  { slug: 'action', icon: 'fa-solid fa-bolt' },
  { slug: 'sports', icon: 'fa-regular fa-futbol' },
  { slug: 'strategy', icon: 'fa-solid fa-chess-knight' },
  { slug: 'platformer', icon: 'fa-solid fa-shoe-prints' },
  { slug: 'arcade', icon: 'fa-solid fa-gamepad' },
  { slug: 'shooting', icon: 'fa-solid fa-crosshairs' },
  { slug: 'card', icon: 'fa-regular fa-gem' },
  { slug: 'rhythm', icon: 'fa-solid fa-drum' },
  { slug: 'adventure', icon: 'fa-regular fa-compass' },
  { slug: 'music', icon: 'fa-solid fa-music' },
  { slug: 'clicker', icon: 'fa-regular fa-hand-pointer' },
  { slug: 'driving', icon: 'fa-solid fa-car' },
  { slug: 'physics', icon: 'fa-solid fa-atom' },
  { slug: 'multiplayer', icon: 'fa-solid fa-users' },
  { slug: '2-player', icon: 'fa-solid fa-cogs' },
] as const;
---

<section class="games categories">
  <div class="container">
    <h2>{t('categories.title', 'Game Categories')}</h2>
    <div class="category-grid">
      {categories.map(({ slug, icon }) => {
        const displayName = t(`categories.${slug}`, slug);
        return (
          <a class="category-card" href={withLocale(`/c/${slug}/`)} title={displayName}>
            <div class="category-card-content">
              <i class={icon} aria-hidden="true"></i>
              <span>{displayName}</span>
            </div>
          </a>
        );
      })}
    </div>
  </div>
</section>
