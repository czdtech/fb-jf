---
export interface Props {
  title?: string
  message?: string
  showRefresh?: boolean
  showHome?: boolean
  error?: string
}

const { 
  title = '页面加载出错',
  message = '很抱歉，页面遇到了意外错误。请尝试刷新页面或返回首页。',
  showRefresh = true,
  showHome = true,
  error
} = Astro.props
---

<div class="min-h-[400px] flex items-center justify-center p-4">
  <div class="max-w-md w-full">
    <!-- Error Icon -->
    <div class="flex justify-center mb-6">
      <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
        <svg class="w-8 h-8 text-red-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
      </div>
    </div>

    <!-- Error Content -->
    <div class="text-center space-y-4">
      <h2 class="text-xl font-semibold text-gray-900">{title}</h2>
      <p class="text-gray-600">{message}</p>
      
      {error && (
        <details class="text-left bg-gray-50 p-3 rounded border text-sm">
          <summary class="cursor-pointer font-medium mb-2 text-gray-700">错误详情</summary>
          <pre class="text-gray-600 text-xs overflow-x-auto whitespace-pre-wrap">{error}</pre>
        </details>
      )}
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row gap-3 mt-6">
      {showRefresh && (
        <button 
          onclick="window.location.reload()"
          class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors"
        >
          <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
          刷新页面
        </button>
      )}
      
      {showHome && (
        <a 
          href="/"
          class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors"
        >
          <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9,22 9,12 15,12 15,22"></polyline>
          </svg>
          返回首页
        </a>
      )}
    </div>

    <!-- Help Text -->
    <div class="mt-6 text-center">
      <p class="text-xs text-gray-500">
        如果问题持续存在，请联系技术支持或稍后重试
      </p>
    </div>
  </div>
</div>