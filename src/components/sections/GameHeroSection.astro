---
interface Props {
  gameData: {
    title: string
    description: string
    iframe: string
    backgroundImage: string
    rating?: {
      score: number
      votes: number
    }
  }
  navigation: any
  breadcrumb?: {
    home: string
    current: string
  }
}

const { gameData, navigation, breadcrumb } = Astro.props
---

<!-- Game Hero Section: 采用首页设计语言 -->
<section class="game-hero-section scroll-animate">
  <div class="container">
    <!-- Breadcrumb Navigation -->
    <nav class="game-breadcrumb music-element hero-music-delay-1">
      <a href="/" class="breadcrumb-link">
        <i class="fas fa-home"></i>
        <span>{breadcrumb?.home || 'Home'}</span>
      </a>
      <span class="breadcrumb-separator">></span>
      <span class="breadcrumb-current"
        >{breadcrumb?.current || gameData.title}</span
      >
    </nav>

    <!-- Game Header Content -->
    <div class="game-hero-content">
      <div class="game-hero-info music-element hero-music-delay-2">
        <h1 class="game-hero-title">{gameData.title}</h1>
        <p class="game-hero-description">{gameData.description}</p>

        {
          gameData.rating && (
            <div class="game-rating music-element hero-music-delay-3">
              <div class="rating-stars">
                {Array.from({ length: 5 }, (_, i) => (
                  <span
                    class={`rating-star ${i < Math.floor(gameData.rating!.score) ? 'filled' : 'empty'}`}
                  >
                    ★
                  </span>
                ))}
              </div>
              <span class="rating-text">
                {gameData.rating.score}/5 · {gameData.rating.votes} reviews
              </span>
            </div>
          )
        }

        <!-- Play Now Button -->
        <button
          class="game-play-btn music-element hero-music-delay-4"
          onclick="scrollToGame()"
        >
          <i class="fas fa-play"></i>
          <span>Play Now</span>
          <div class="btn-glow"></div>
        </button>
      </div>
    </div>
  </div>
</section>

<script>
  function scrollToGame() {
    const gameSection = document.getElementById('game-main-section')
    if (gameSection) {
      gameSection.scrollIntoView({ behavior: 'smooth' })
    }
  }
</script>

<style>
  /* ==========================================================================
   Game Hero Section - 统一设计语言
   ========================================================================== */

  .game-hero-section {
    padding-top: calc(80px + var(--space-6));
    padding-bottom: var(--space-6);
    position: relative;
  }

  /* Breadcrumb Navigation */
  .game-breadcrumb {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
    font-size: var(--font-size-sm);
  }

  .breadcrumb-link {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    color: var(--color-primary-600);
    text-decoration: none;
    transition: all var(--duration-200) var(--ease-in-out);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--border-radius-md);
  }

  .breadcrumb-link:hover {
    color: var(--color-primary-700);
    background: rgba(147, 51, 234, 0.1);
  }

  .breadcrumb-separator {
    color: var(--color-gray-400);
    font-weight: 500;
  }

  .breadcrumb-current {
    color: var(--color-gray-600);
    font-weight: 500;
  }

  /* Hero Content */
  .game-hero-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
  }

  .game-hero-info {
    background: var(--hero-sidebar-glass-bg);
    backdrop-filter: var(--hero-sidebar-glass-blur);
    -webkit-backdrop-filter: var(--hero-sidebar-glass-blur);
    border: var(--hero-sidebar-glass-border);
    box-shadow: var(--hero-sidebar-glass-shadow);
    border-radius: var(--border-radius-xl);
    padding: var(--space-8);
    transition: all var(--duration-300) var(--ease-in-out);
  }

  .game-hero-info:hover {
    transform: translateY(-4px);
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.15),
      0 8px 24px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }

  .game-hero-title {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-gray-900);
    margin-bottom: var(--space-4);
    background: linear-gradient(
      135deg,
      var(--color-primary-600),
      var(--color-primary-700)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .game-hero-description {
    font-size: var(--font-size-lg);
    color: var(--color-gray-600);
    line-height: var(--line-height-relaxed);
    margin-bottom: var(--space-6);
  }

  /* Rating Component */
  .game-rating {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    margin-bottom: var(--space-6);
  }

  .rating-stars {
    display: flex;
    gap: var(--space-1);
  }

  .rating-star {
    font-size: var(--font-size-lg);
    transition: all var(--duration-200) var(--ease-in-out);
  }

  .rating-star.filled {
    color: #fbbf24;
  }

  .rating-star.empty {
    color: var(--color-gray-300);
  }

  .rating-text {
    font-size: var(--font-size-sm);
    color: var(--color-gray-500);
    font-weight: 500;
  }

  /* Play Button */
  .game-play-btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4) var(--space-8);
    background: linear-gradient(
      135deg,
      var(--color-primary-600),
      var(--color-primary-700)
    );
    color: white;
    border: none;
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: all var(--duration-300) var(--ease-in-out);
    overflow: hidden;
  }

  .game-play-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(147, 51, 234, 0.4);
  }

  .game-play-btn:active {
    transform: translateY(0);
  }

  .btn-glow {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      45deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    transform: translateX(-100%);
    transition: transform 0.6s;
  }

  .game-play-btn:hover .btn-glow {
    transform: translateX(100%);
  }

  /* 响应式设计 */
  @media (max-width: 768px) {
    .game-hero-section {
      padding-top: calc(80px + var(--space-4));
    }

    .game-hero-info {
      padding: var(--space-6);
    }

    .game-hero-title {
      font-size: var(--font-size-3xl);
    }

    .game-hero-description {
      font-size: var(--font-size-base);
    }

    .game-rating {
      flex-direction: column;
      gap: var(--space-2);
    }
  }

  @media (max-width: 480px) {
    .game-hero-info {
      padding: var(--space-4);
    }

    .game-hero-title {
      font-size: var(--font-size-2xl);
    }

    .game-play-btn {
      padding: var(--space-3) var(--space-6);
      font-size: var(--font-size-base);
    }
  }
</style>
