---
import type { BreadcrumbItem } from '@/types/navigation';

interface Props {
  pageTotal: number;
  pageCount: number;
  breadcrumbs: {
    home: string;
    current: string;
  };
  title: {
    main: string;
    accent: string;
  };
  subtitle: string;
}

const { pageTotal, pageCount, breadcrumbs, title, subtitle } = Astro.props;

// 生成随机音符位置数据，避免硬编码
const notes = Array.from({ length: 12 }, (_, i) => {
  const positions = [
    { top: '20%', left: '10%' },
    { top: '30%', left: '80%' },
    { top: '60%', left: '15%' },
    { top: '70%', left: '85%' },
    { top: '40%', left: '90%' },
    { top: '50%', left: '5%' },
    { top: '25%', left: '50%' },
    { top: '75%', left: '45%' },
    { top: '35%', left: '25%' },
    { top: '65%', left: '75%' },
    { top: '45%', left: '35%' },
    { top: '55%', left: '65%' }
  ][i];
  
  const noteSymbol = ['♪', '♫', '♬', '♩'][i % 4];
  const delay = i * 0.3;
  
  return { ...positions, symbol: noteSymbol, delay };
});
---

<section class="games-hero-compact">
  <div class="container">
    <div class="hero-compact-content">
      <!-- 面包屑导航 -->
      <nav class="breadcrumb-compact" aria-label="面包屑导航">
        <a href="/" class="breadcrumb-link">
          <i class="fas fa-home"></i>
          <span>{breadcrumbs.home}</span>
        </a>
        <span class="breadcrumb-separator">></span>
        <span class="breadcrumb-current">{breadcrumbs.current}</span>
      </nav>

      <!-- 紧凑的标题和统计行 -->
      <div class="title-stats-row">
        <div class="title-compact">
          <h1 class="games-title-compact">
            <span class="title-main">{title.main}</span>
            <span class="title-accent">{title.accent}</span>
          </h1>
          <span class="subtitle-compact">{subtitle}</span>
        </div>
        <div class="stats-inline">
          <span class="stat-item">{pageTotal} Games</span>
          <span class="stat-separator">•</span>
          <span class="stat-item">{pageCount} Pages</span>
          <span class="stat-separator">•</span>
          <span class="stat-item">∞ Creativity</span>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* 超紧凑Hero设计 */
  .games-hero-compact {
    background: var(--hero-main-bg);
    color: var(--color-text);
    padding: var(--space-6) 0 var(--space-4);
    padding-top: calc(80px + var(--space-4));
    position: relative;
    border-bottom: 1px solid rgba(147, 51, 234, 0.1);
  }

  .hero-compact-content {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 10;
  }

  /* 紧凑面包屑 */
  .breadcrumb-compact {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
    font-size: var(--font-size-sm);
  }

  .breadcrumb-link {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    color: var(--color-primary-600);
    text-decoration: none;
    transition: color var(--duration-200);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--border-radius-md);
  }

  .breadcrumb-link:hover {
    color: var(--color-primary-700);
    background: rgba(147, 51, 234, 0.1);
  }

  .breadcrumb-separator {
    color: var(--color-gray-400);
    font-weight: 500;
  }

  .breadcrumb-current {
    color: var(--color-gray-600);
    font-weight: 500;
  }

  /* 标题统计行 */
  .title-stats-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-6);
  }

  .title-compact {
    display: flex;
    align-items: baseline;
    gap: var(--space-4);
    flex: 1;
  }

  .games-title-compact {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    line-height: 1.2;
    margin: 0;
    display: flex;
    align-items: baseline;
    gap: var(--space-1);
  }

  .title-main {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .title-accent {
    background: linear-gradient(45deg, var(--color-primary-600) 0%, var(--color-primary-700) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .subtitle-compact {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    white-space: nowrap;
  }

  /* 内联统计 */
  .stats-inline {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    background: rgba(147, 51, 234, 0.05);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--border-radius-lg);
    border: 1px solid rgba(147, 51, 234, 0.1);
  }

  .stat-item {
    font-weight: var(--font-weight-medium);
    color: var(--color-primary-600);
  }

  .stat-separator {
    color: var(--color-gray-300);
  }

  /* 响应式设计 */
  @media (max-width: 768px) {
    .games-hero-compact {
      padding: var(--space-4) 0 var(--space-3);
    }

    .title-stats-row {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-3);
    }

    .title-compact {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-1);
    }

    .games-title-compact {
      font-size: var(--font-size-xl);
    }

    .stats-inline {
      align-self: stretch;
      justify-content: center;
    }

    .breadcrumb-compact {
      justify-content: flex-start;
    }
  }

  @media (max-width: 480px) {
    .games-hero-compact {
      padding: var(--space-3) 0 var(--space-2);
    }

    .games-title-compact {
      font-size: var(--font-size-lg);
    }

    .stats-inline {
      gap: var(--space-2);
      padding: var(--space-2) var(--space-3);
      font-size: var(--font-size-xs);
    }

    .title-compact {
      gap: var(--space-1);
    }

    .subtitle-compact {
      font-size: var(--font-size-xs);
    }
  }
</style>