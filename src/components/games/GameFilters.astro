---
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

interface Props {
  categories?: { name: string; count: number; active: boolean }[];
  totalGames: number;
}

const { categories = [], totalGames } = Astro.props;
---

<div class="bg-white/70 backdrop-blur-md border border-white/20 shadow-lg rounded-xl p-6 mb-8">
  <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-end">
    <!-- 搜索框 -->
    <div class="md:col-span-5">
      <label for="game-search" class="block text-sm font-medium text-gray-700 mb-2">
        Search Games
      </label>
      <Input
        id="game-search"
        type="search"
        placeholder="Search for games..."
        className="w-full"
      />
    </div>

    <!-- 分类筛选 -->
    <div class="md:col-span-3">
      <label for="category-select" class="block text-sm font-medium text-gray-700 mb-2">
        Category
      </label>
      <select
        id="category-select"
        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
      >
        <option value="all">All Games ({totalGames})</option>
        {categories.map((category) => (
          <option value={category.name.toLowerCase().replace(/\s+/g, '-')}>
            {category.name} ({category.count})
          </option>
        ))}
      </select>
    </div>

    <!-- 排序选项 -->
    <div class="md:col-span-2">
      <label for="sort-select" class="block text-sm font-medium text-gray-700 mb-2">
        Sort By
      </label>
      <select
        id="sort-select"
        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
      >
        <option value="featured">Featured</option>
        <option value="name">Name A-Z</option>
        <option value="name-desc">Name Z-A</option>
        <option value="newest">Newest</option>
        <option value="rating">Rating</option>
      </select>
    </div>

    <!-- 清除筛选按钮 -->
    <div class="md:col-span-2">
      <Button variant="outline" className="w-full" id="clear-filters">
        Clear Filters
      </Button>
    </div>
  </div>
</div>

<script type="module" is:inline>
  import '@/scripts/games/filters.js';
  void 0;
  </script>
