---
/**
 * BaseLayout Component
 * General-purpose page layout for homepage and special pages (privacy, terms, 404)
 * 
 * Integrates SEOHead, BaseHead, Analytics components
 * Provides consistent HTML structure across all pages
 * 
 * Requirements: 7.1, 7.2, 7.3
 */
import SEOHead from '../components/SEOHead.astro';
import BaseHead from '../components/BaseHead.astro';
import Analytics from '../components/Analytics.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CookieConsent from '../components/CookieConsent.astro';
import ShareButtons from '../components/ShareButtons.astro';

interface Props {
  title: string;
  description: string;
  canonicalUrl: string;
  keywords?: string;
  ogImage?: string;
  ogType?: string;
  ogUrl?: string;
  twitterCard?: string;
  twitterSiteUrl?: string;
  jsonLd?: object;
  hreflangLinks?: Array<{lang: string; url: string}>;
  noindex?: boolean;
  lang?: string;
  additionalStyles?: string[];
  showHeader?: boolean;
  showFooter?: boolean;
  showEmail?: boolean;
}

const {
  title,
  description,
  canonicalUrl,
  keywords,
  ogImage,
  ogType = 'website',
  ogUrl,
  twitterCard = 'summary_large_image',
  twitterSiteUrl,
  jsonLd,
  hreflangLinks = [],
  noindex = false,
  lang = 'en',
  additionalStyles = [],
  showHeader = true,
  showFooter = true,
  showEmail = false
} = Astro.props;
---

<!DOCTYPE html>
<html lang={lang}>
<head>
    <BaseHead />
    <SEOHead
      title={title}
      description={description}
      canonicalUrl={canonicalUrl}
      keywords={keywords}
      lang={lang}
      ogImage={ogImage}
      ogType={ogType}
      ogUrl={ogUrl}
      twitterCard={twitterCard}
      twitterSiteUrl={twitterSiteUrl}
      jsonLd={jsonLd}
      hreflangLinks={hreflangLinks}
      noindex={noindex}
    />
    {additionalStyles.map(styleUrl => (
      <link rel="stylesheet" href={styleUrl}>
    ))}
    <Analytics />
</head>
<body>
    {showHeader && <Header lang={lang} />}

    <main data-pagefind-body>
        <slot />
    </main>

    {showFooter && <Footer lang={lang} showEmail={showEmail} />}
    <CookieConsent lang={lang} />
    <ShareButtons url={canonicalUrl} title={title} lang={lang} />
</body>
</html>
