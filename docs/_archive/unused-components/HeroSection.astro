---
interface Props {
  hero: {
    title: string
    description: string
    mainGame: {
      iframe: string
      backgroundImage: string
    }
  }
  games: {
    new: any[]
    popular: any[]
    trending: any[]
  }
}

const { hero, games } = Astro.props

// å¯¼å…¥ç»„ä»¶
import GameCard from '@/components/GameCard.astro'
import GameIframe from '@/components/GameIframe.astro'
import HeroHeader from '@/components/sections/HeroHeader.astro'
import HeroGamesSidebar from '@/components/sections/HeroGamesSidebar.astro'
import HeroCommunityGames from '@/components/sections/HeroCommunityGames.astro'
import HeroTrendingGames from '@/components/sections/HeroTrendingGames.astro'
import HeroMainGame from '@/components/sections/HeroMainGame.astro'

// Community Modsæ¸¸æˆæ•°æ®
const communityMods = [
  {
    title: 'Fiddlebops but Sprunki',
    slug: 'fiddlebops-but-sprunki',
    image: '/fiddlebops-but-sprunki.png',
  },
  {
    title: 'Fiddlebops Fix',
    slug: 'fiddlebops-fix',
    image: '/fiddlebops-fix.png',
  },
  {
    title: 'Fiddlebops Polos',
    slug: 'fiddlebops-polos',
    image: '/fiddlebops-polos.png',
  },
  {
    title: "Fiddlebops But Dandy's World",
    slug: 'fiddlebops-but-dandys-world',
    image: '/fiddlebops-but-dandys-world.png',
  },
]
---

<!-- Hero Section: é‡æ„åçš„ç»„ä»¶åŒ–è®¾è®¡ -->
<section class="hero-section scroll-animate">
  <div class="container">
    <!-- Hero Content: ç®€æ´æ¸¸æˆåŒ–è®¾è®¡ -->
    <HeroHeader title={hero.title} description={hero.description} />

    <!-- Three Column Layout: New Games | Main Game | Popular Games -->
    <div class="hero-section__games">
      <!-- Left Column - New Games -->
      <HeroGamesSidebar
        title="âœ¨ New Games"
        games={games.new}
        variant="left"
        musicDelayStart={1}
      />

      <!-- Center Column - Main Game Area with Community Games -->
      <div class="hero-section__main-game-area">
        <!-- Main Game iframe -->
        <HeroMainGame
          mainGame={hero.mainGame}
          musicDelay={3}
        />

        <!-- Community Games - Directly below iframe -->
        <HeroCommunityGames
          communityMods={communityMods}
          musicDelayStart={7}
        />
      </div>

      <!-- Right Column - Popular Games -->
      <HeroGamesSidebar
        title="ğŸ”¥ Popular Games"
        games={games.popular}
        variant="right"
        musicDelayStart={2}
      />
    </div>


    <!-- Trending Games Section -->
    <HeroTrendingGames
      games={games.trending}
      musicDelayStart={10}
    />
  </div>
</section>

<script>
  // ç®€åŒ–çš„éŸ³ç¬¦åŠ¨ç”»äº¤äº’æ•ˆæœ
  document.addEventListener('DOMContentLoaded', function () {
    const musicElements = document.querySelectorAll('.music-element')

    // ä¿ç•™é¼ æ ‡æ‚¬åœçš„éŸ³ç¬¦åŠ¨ç”»å¢å¼º
    musicElements.forEach(element => {
      element.addEventListener('mouseenter', function (this: HTMLElement) {
        this.classList.add('hero-music-pulse-hover')
      })

      element.addEventListener('mouseleave', function (this: HTMLElement) {
        this.classList.remove('hero-music-pulse-hover')
      })
    })
  })
</script>

<style>
  /**
 * HeroSection Component
 *
 * èƒŒæ™¯å±‚çº§ï¼š
 * 1. ä¸»èƒŒæ™¯æ¸å˜ (.hero-section)
 * 2. è£…é¥°çº¹ç† (.hero-section::before)
 * 3. ä¾§è¾¹æ ç»ç’ƒæ•ˆæœ (.hero-section__sidebar-content)
 * 4. ä¸»è¦å†…å®¹èƒŒæ™¯ (.hero-section__main-game)
 *
 * ä½¿ç”¨çš„è®¾è®¡ä»¤ç‰Œï¼š
 * - --hero-main-bg: ä¸»èƒŒæ™¯æ¸å˜
 * - --hero-texture-bg: ç‚¹çŠ¶çº¹ç†
 * - --hero-sidebar-glass-*: ç»ç’ƒæ‹Ÿæ€æ•ˆæœ
 */

  /* ==========================================================================
   Hero Section - ç»„ä»¶åŒ–è®¾è®¡
   ========================================================================== */

  .hero-section {
    /* ä½¿ç”¨è¯­ä¹‰åŒ–é—´è·å˜é‡ - Appleå¼è®¾è®¡ */
    padding-top: calc(80px + var(--space-xxlarge));
    padding-bottom: var(--space-xlarge);
    min-height: 85vh;
    display: flex;
    align-items: center;
  }

  .hero-section__games {
    /* æ¸¸æˆåŒºåŸŸå¸ƒå±€ - ä½¿ç”¨è¯­ä¹‰åŒ–é—´è· */
    display: grid;
    grid-template-columns: 200px 1fr 200px;
    gap: var(--space-base);
    align-items: start;
    max-width: 100%;
    margin: 0 auto;
    flex: 1;
    min-height: 0;
  }


  /* ==========================================================================
   å“åº”å¼è®¾è®¡
   ========================================================================== */

  @media (min-width: 1400px) {
    .hero-section__games {
      grid-template-columns: 220px 1fr 220px;
      gap: var(--space-medium);
    }
  }

  @media (max-width: 1200px) {
    .hero-section__games {
      grid-template-columns: 180px 1fr 180px;
      gap: var(--space-small);
    }
  }

  @media (max-width: 1024px) {
    .hero-section__games {
      grid-template-columns: 1fr;
      gap: var(--space-base);
    }

    .hero-section__main-game-area {
      order: 0;
      width: 100%;
    }
  }

  /* å“åº”å¼é—´è·ç°åœ¨ç”±å…¨å±€è¯­ä¹‰åŒ–å˜é‡è‡ªåŠ¨å¤„ç† */
  /* ä¸å†éœ€è¦æ‰‹åŠ¨è®¾ç½®æ¯ä¸ªæ–­ç‚¹çš„é—´è·å€¼ */



  /* ==========================================================================
   Main Game Area Styles
   ========================================================================== */

  .hero-section__main-game-area {
    /* ä¸»æ¸¸æˆåŒºåŸŸå®¹å™¨ - ä½¿ç”¨è¯­ä¹‰åŒ–é—´è· */
    display: flex;
    flex-direction: column;
    gap: var(--space-medium);
    height: 100%;
    min-height: 800px;
  }

  /* ==========================================================================
   å“åº”å¼è®¾è®¡ - ä½¿ç”¨è¯­ä¹‰åŒ–é—´è·è‡ªåŠ¨ç¼©æ”¾
   ========================================================================== */

  @media (max-width: 768px) {
    .hero-section__main-game-area {
      min-height: 600px;
    }
  }

  @media (max-width: 480px) {
    .hero-section__main-game-area {
      min-height: 500px;
    }
  }
</style>
